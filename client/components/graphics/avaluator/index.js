import React, { PureComponent } from 'react'
import PropTypes from 'prop-types'
import StaticComponent from 'components/StaticComponent'
import { SIMPLE, CHALLENGING, COMPLEX } from 'constants/forecast/ates'
import {
    LOW,
    MODERATE,
    CONSIDERABLE,
    HIGH,
    EXTREME,
} from 'constants/forecast/rating'
import styles from './styles.css'

// Components
export class Chart extends PureComponent {
    static propTypes = {
        terrain: PropTypes.oneOf([SIMPLE, CHALLENGING, COMPLEX]).isRequired,
        danger: PropTypes.oneOf([LOW, MODERATE, CONSIDERABLE, HIGH, EXTREME])
            .isRequired,
    }
    get indicator() {
        const { terrain, danger } = this.props
        const x = X_COORDINATES.get(terrain)
        const y = Y_COORDINATES.get(danger) + 2

        return <circle cx={x} cy={y} r="7" stroke="#FFFFFF" strokeWidth="2" />
    }
    render() {
        return (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200">
                <path
                    fill="#00aeef"
                    d="M78.40289618 186.3726109h221.597103v13.62739335h-221.597103z"
                />
                <text
                    x="187.821"
                    y="191.24091"
                    fill="#fff"
                    fontSize="8"
                    textAnchor="middle"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    <tspan>Avalanche terrain rating</tspan>
                </text>
                <path
                    fill="#fcee23"
                    d="M78.4779585 22.66742236c0 .632499 49.27896848 20.450801 90.96032833 41.0070185 41.68135985 20.5562175 130.53124591 31.62495 130.53124591 31.62495v57.66283077s1.0552243 15.179976-11.92403459 15.179976h-61.83614398s-8.75836169-51.654085-45.3746449-72.73739027c-36.61628321-21.0833-102.35675077-53.551582-102.35675077-53.551582v-19.185803z"
                />
                <path
                    fill="#ec2227"
                    d="M78.4779585 26.25158336v-9.3820685c0-14.23122718 1.0552243-16.97205576 14.56209112-16.86663926 14.35104837.1054165 165.77573542 0 190.78455133 0 17.62224581 0 16.14493179 5.05999158 16.14493179 19.60746826v76.4269625s-85.15660101-8.7495695-131.16438049-28.462455c-42.84210658-18.4478875-90.32719375-41.323268-90.32719375-41.323268z"
                />
                <path
                    fill="#12b24b"
                    d="M78.4779585 45.43738636v105.83817127c0 14.0203945 1.89940374 16.7612235 21.42104696 16.7612235 19.52164955 0 148.25901415-.1054165 148.25901415-.1054165-5.2761215-22.769964-8.96940655-32.1520325-20.89344114-45.6453445-17.51672338-19.81831254-29.86284769-29.51662527-68.5895795-47.96451277-13.29582618-6.32499-80.19704047-37.4228575-80.19704047-37.4228575v8.5387365z"
                />
                <path
                    fill="#f15b25"
                    d="M78.4779585 24.77575236s47.48508717 22.980797 90.32719375 41.4286845c46.00777948 19.818302 131.16438049 28.462455 131.16438049 28.462455v1.3704145s-85.15660101-8.7495695-131.16438049-28.462455c-42.84210658-18.4478875-90.32719375-41.323268-90.32719375-41.323268v-1.475831z"
                />
                <path
                    fill="#f58220"
                    d="M78.4779585 26.04075036s47.48508717 22.980797 90.32719375 41.4286845c46.00777948 19.818302 131.16438049 28.462455 131.16438049 28.462455v1.475831s-85.15660101-8.7495695-131.16438049-28.462455c-42.84210658-18.4478875-90.32719375-41.4286845-90.32719375-41.4286845v-1.475831z"
                />
                <path
                    fill="#faa71b"
                    d="M78.4779585 27.51658136s47.48508717 22.980797 90.32719375 41.4286845c46.00777948 19.818302 131.16438049 28.462455 131.16438049 28.462455v1.47582995s-85.15660101-8.74956845-131.16438049-28.46245395c-42.84210658-18.553304-90.32719375-41.4286845-90.32719375-41.4286845v-1.475831z"
                />
                <path
                    fill="#ffcc04"
                    d="M78.4779585 28.67616286s47.48508717 22.980797 90.32719375 41.4286845c46.00777948 19.818302 131.16438049 28.46245395 131.16438049 28.46245395v1.47582678s-85.15660101-8.74956423-131.16438049-28.46244973c-42.84210658-18.4478875-90.32719375-41.4286845-90.32719375-41.4286845v-1.475831z"
                />
                <path
                    fill="#51b848"
                    d="M78.4779585 41.22072636s65.42390027 29.727453 78.71972645 35.9470265c38.83225424 18.131638 51.07285612 27.19745173 68.69510193 46.69951477 12.13507945 13.282479 15.61731964 21.715799 20.89344114 44.1695135h1.58283645c-5.2761215-22.348298-8.96940655-31.5195335-20.89344114-44.8020125-17.51672338-19.39664654-29.86284769-28.98954277-68.69510193-47.12118077-13.40134861-6.2195735-80.3025629-36.684942-80.3025629-36.684942v1.7920805z"
                />
                <path
                    fill="#8fc640"
                    d="M78.4779585 39.42864586s65.95151242 30.149119 79.45838346 36.474109c39.14882153 18.342471 51.49494584 27.51370123 69.32823651 47.33201377 12.24060188 13.493312 15.72284207 22.0320485 20.99896357 44.8020125h1.58283645c-5.2761215-22.6645475-9.07492898-32.046616-20.99896357-45.329095-17.62224581-19.71289604-30.07389255-29.41120877-69.22271408-47.75367977-13.50687104-6.32499-80.93569748-37.2120245-80.93569748-37.2120245l-.21104486 1.686664z"
                />
                <path
                    fill="#bed731"
                    d="M78.4779585 38.05823136s66.584647 30.4653685 80.09151804 36.895775c39.46538882 18.553304 51.91703556 27.82995073 69.85584866 47.85909627 12.34612431 13.704145 15.8283645 22.348298 21.21000843 45.2236785h1.58283645c-5.2761215-22.980797-9.18045141-32.3628655-21.21000843-45.8561775-17.83329067-19.92372904-30.39045984-29.72745827-69.85584866-48.28076227-13.61239347-6.32499-81.67435449-37.6336905-81.67435449-37.6336905v1.7920805z"
                />
                <path
                    fill="#ede80a"
                    d="M78.4779585 36.26615086s67.11225915 30.8870345 80.72465262 37.4228575c39.78195611 18.8695535 52.33912528 28.25161673 70.48898324 48.49159527 12.45164674 13.8095615 16.03940936 22.6645475 21.31553086 45.8561775h1.58283645c-5.38164393-23.2970465-9.18045141-32.7845315-21.42105329-46.4886765-17.9388131-20.13456204-30.6015047-30.14912427-70.38346081-48.91326127-13.7179159-6.4304065-82.30748907-38.160773-82.30748907-38.160773v1.7920805z"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M82.221006 145.041l209.499994-.00008"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <text
                    x="118.66241"
                    y="173.24091"
                    fill="#00aeef"
                    fontSize="8"
                    textAnchor="middle"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Simple
                </text>
                <text
                    x="188.45967"
                    y="173.24091"
                    fill="#00aeef"
                    fontSize="8"
                    textAnchor="middle"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Challenging
                </text>
                <text
                    x="257.63116"
                    y="173.24091"
                    fill="#00aeef"
                    fontSize="8"
                    textAnchor="middle"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Complex
                </text>
                <text
                    x="62.444443"
                    y="147.90033"
                    fill="#245eac"
                    fontSize="8"
                    textAnchor="left"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Low
                </text>
                <text
                    x="40.24913"
                    y="119.82338"
                    fill="#245eac"
                    fontSize="8"
                    textAnchor="left"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Moderate
                </text>
                <text
                    x="25.921005"
                    y="87.82338"
                    fill="#245eac"
                    fontSize="8"
                    textAnchor="left"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Considerable
                </text>
                <text
                    x="60.167099"
                    y="55.24799"
                    fill="#245eac"
                    fontSize="8"
                    textAnchor="left"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    High
                </text>
                <text
                    x="44.62413"
                    y="24.000332"
                    fill="#245eac"
                    fontSize="8"
                    textAnchor="left"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)">
                    Extreme
                </text>
                <path
                    fill="#245eac"
                    d="M.00000103 167.37103377V.50594875h13.64108713v166.86508502z"
                />
                <text
                    x="-84.388763"
                    y="16.520756"
                    fontSize="8"
                    textAnchor="middle"
                    transform="matrix(0 -1.05417 1.05522 0 -8.283645 -5.4164978)">
                    <tspan fill="#fff">Danger rating</tspan>
                </text>
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M82.221006 116.841l209.699994-.00008"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M82.221006 84.841L291.921 84.840915"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M82.221006 53.041L291.921 53.040915"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M82.221006 21.141L291.921 21.140915"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M257.721 5.1409157V164.64092"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M188.321 5.1409157V164.64092"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                <path
                    fill="none"
                    stroke="#fff"
                    strokeDasharray="2,1,2,1,2,1"
                    d="M118.721 5.1409157V164.64092"
                    opacity=".6"
                    transform="matrix(1.05522 0 0 1.05417 -8.283645 -5.4164978)"
                />
                {this.indicator}
            </svg>
        )
    }
}

export class Legend extends StaticComponent {
    render() {
        return (
            <div className={styles.Legend}>
                {COLORS.map((color, index) => (
                    <div key={color} style={{ color }}>
                        {TEXTS[index]}
                    </div>
                ))}
            </div>
        )
    }
}

// Constants
const COLORS = ['#EC2227', '#FCEE23', '#12B24B']
const TEXTS = ['Not recommended', 'Extra caution', 'Caution']
const X_COORDINATES = new Map([
    [SIMPLE, 116.5],
    [CHALLENGING, 189.9],
    [COMPLEX, 263.1],
])
const Y_COORDINATES = new Map([
    [LOW, 182.6],
    [MODERATE, 148.98],
    [CONSIDERABLE, 115.45],
    [HIGH, 81.72],
    [EXTREME, 52],
])
